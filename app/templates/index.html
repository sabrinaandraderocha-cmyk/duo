<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Duo</title>

  <link rel="manifest" href="/static/manifest.json">
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
  <header class="top">
    <div class="brand">
      <h1>Duo ğŸ’™</h1>

      <p class="subtitle">
        DiÃ¡rio do casal:
        <strong>{{ user.name }}</strong>
        +
        <strong>{{ partner_name or "Seu par" }}</strong>
      </p>

      <div class="topbar">
        <span class="muted">
          Logado como: <strong>{{ user.name }}</strong>
        </span>
        <a class="btn secondary" href="/logout">Sair</a>
      </div>

      <!-- ğŸ”— ATALHOS -->
      <div class="quick-actions">
        <a class="btn tiny secondary" href="/puxa-papo">ğŸ’¬ Puxa-papo</a>
        <a class="btn tiny secondary" href="/datas-especiais">ğŸ’– Datas especiais</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- =========================
         REGISTRO DO MOMENTO
         ========================= -->
    <section class="card">
      <div class="card-title">
        <h2>Registro do momento (2 lados)</h2>
        <p class="muted">
          Cada um registra como viveu o dia â€” o momento do casal vai se compondo.
        </p>
      </div>

      <div class="two-col">
        <!-- =========================
             LADO: VOCÃŠ
             ========================= -->
        <form method="post" action="/save_side" class="side">
          <input type="hidden" name="side" value="self">

          <h3>Parte de {{ user.name }}</h3>

          <label>Como eu estou hoje</label>
          <input name="mood" placeholder="ex: em paz, sensÃ­vel, cansada">

          <label>Momento especial</label>
          <textarea name="moment_special"
            placeholder="O que aconteceu hoje que foi significativo para vocÃª?"></textarea>

          <label>Atitude do meu par que me fez sentir amor</label>
          <textarea name="love_action"
            placeholder="Um gesto, uma escuta, um cuidadoâ€¦"></textarea>

          <label>Hoje estou parecido com (personagem)</label>
          <input name="character" placeholder="ex: AmÃ©lie, Ted Lasso">

          <label>MÃºsica do dia</label>
          <input name="music" placeholder="ex: Artista â€” MÃºsica">

          <!-- ğŸ·ï¸ TAGS -->
          <label>Climinha do dia (opcional)</label>
          <div class="tags">
            {% for tag in [
              "Hoje tem ğŸ˜",
              "Quero filme ğŸ¬",
              "Quero massagem ğŸ’†",
              "TÃ´ estressada ğŸ˜¤",
              "Saudades, quero beijo ğŸ’‹"
            ] %}
              <label class="tag">
                <input type="checkbox" name="tags_csv" value="{{ tag }}">
                <span>{{ tag }}</span>
              </label>
            {% endfor %}
          </div>

          <button class="btn primary" type="submit">
            Salvar meu registro
          </button>
        </form>

        <!-- =========================
             LADO: PAR
             ========================= -->
        <form method="post" action="/save_side" class="side">
          <input type="hidden" name="side" value="partner">

          <h3>Parte de {{ partner_name or "Seu par" }}</h3>

          <label>Como eu estou hoje</label>
          <input name="mood">

          <label>Momento especial</label>
          <textarea name="moment_special"></textarea>

          <label>Atitude do meu par que me fez sentir amor</label>
          <textarea name="love_action"></textarea>

          <label>Hoje estou parecido com (personagem)</label>
          <input name="character">

          <label>MÃºsica do dia</label>
          <input name="music">

          <button class="btn secondary" type="submit">
            Salvar registro do par
          </button>
        </form>
      </div>
    </section>

    <!-- =========================
         TIMELINE
         ========================= -->
    <section class="timeline">
      <h2>Momentos do casal</h2>

      {% if entries|length == 0 %}
        <p class="empty">
          Ainda nÃ£o hÃ¡ registros. Quando vocÃªs escrevem juntos, o Duo ganha vida ğŸ’™
        </p>
      {% endif %}

      {% for e in entries %}
        <article class="entry">
          <div class="entry-head">
            <strong>{{ e.day }}</strong>
          </div>

          <div class="two-col read">
            <div class="side readside">
              <h3>{{ user.name }}</h3>
              {% if e.me.mood %}<p><strong>Como estou:</strong> {{ e.me.mood }}</p>{% endif %}
              {% if e.me.moment_special %}<p>{{ e.me.moment_special }}</p>{% endif %}
            </div>

            <div class="side readside">
              <h3>{{ partner_name or "Seu par" }}</h3>
              {% if e.par.mood %}<p><strong>Como estou:</strong> {{ e.par.mood }}</p>{% endif %}
              {% if e.par.moment_special %}<p>{{ e.par.moment_special }}</p>{% endif %}
            </div>
          </div>
        </article>
      {% endfor %}
    </section>
  </main>

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/static/js/sw.js");
    }
  </script>
</body>
</html>
