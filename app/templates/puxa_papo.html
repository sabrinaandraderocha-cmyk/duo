{% extends "base.html" %}
{% block title %}Puxa-papo â€¢ Duo{% endblock %}

{% block content %}
<div class="wrap game-container">

  <div style="text-align: center; margin-bottom: 30px;">
    <h2 style="font-size: 28px; margin: 0 0 8px 0; color: var(--accent);">Puxa-papo ðŸ’¬</h2>
    <p class="muted">
      Um jogo rÃ¡pido pra reconectar.<br>
      {% if partner_name %} VocÃª + <strong>{{ partner_name }}</strong> {% endif %}
    </p>
  </div>

  <div class="question-card">
    
    {% if last %}
      <div class="quote-icon">â€œ</div>
      
      <div class="question-meta">
        {{ dict(modes).get(last.mode, 'Pergunta') }}
      </div>

      <div class="question-text">
        {{ last.question }}
      </div>

      <button 
        class="btn tiny secondary" 
        onclick="navigator.clipboard.writeText(`{{ last.question|replace('`','\\`') }}`); this.innerText = 'Copiado! âœ…'; setTimeout(() => this.innerText = 'ðŸ“‹ Copiar', 2000);"
        style="margin-top: 10px;"
      >
        ðŸ“‹ Copiar texto
      </button>

    {% else %}
      <div style="font-size: 50px; margin-bottom: 20px;">ðŸŽ²</div>
      <h3 style="margin: 0 0 10px; font-size: 20px;">Vamos jogar?</h3>
      <p class="muted" style="max-width: 300px;">
        Escolha um modo abaixo e clique em sortear para receber uma pergunta surpresa.
      </p>
    {% endif %}

  </div>

  <div class="game-controls">
    
    <form method="post" action="/puxa-papo/next" style="display: flex; gap: 10px; width: 100%; flex-wrap: wrap;">
      
      <div style="flex: 1; min-width: 200px;">
        <select name="mode" style="height: 48px; cursor: pointer;">
          {% for key,label in modes %}
            <option value="{{ key }}" {% if last and last.mode==key %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
      </div>

      <button class="btn primary" type="submit" style="flex: 1; white-space: nowrap;">
        {% if last %}
          ðŸ”„ Outra pergunta
        {% else %}
          âœ¨ Sortear Primeira
        {% endif %}
      </button>

    </form>
  </div>

  <div style="text-align: center; margin-top: 24px;">
    <a href="/" class="muted" style="font-size: 14px; text-decoration: underline;">Voltar para o DiÃ¡rio</a>
  </div>

</div>
{% endblock %}
